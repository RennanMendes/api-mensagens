{"_type":"export","__export_format":4,"__export_date":"2025-02-12T00:21:13.088Z","__export_source":"insomnia.desktop.app:v10.3.0","resources":[{"_id":"req_fa5ac046e81b4b6c871dab3d28fa1f0c","parentId":"fld_b7ee2f34b1aa4a468c5e8c7abaead73c","modified":1739318304638,"created":1739067803075,"url":"\thttp://localhost:8080/notificacao/89b6f02f-3a3b-4dd4-a2f2-41da9f19ba63","name":"Buscar agendamento - Id válido","description":"","method":"GET","body":{},"parameters":[],"headers":[{"name":"User-Agent","value":"insomnia/10.3.0"}],"authentication":{},"preRequestScript":"","metaSortKey":-1739067803075,"isPrivate":false,"pathParameters":[],"settingStoreCookies":true,"settingSendCookies":true,"settingDisableRenderRequestBody":false,"settingEncodeUrl":true,"settingRebuildPath":true,"settingFollowRedirects":"global","_type":"request"},{"_id":"fld_b7ee2f34b1aa4a468c5e8c7abaead73c","parentId":"wrk_2c48f35cf3174573864c6711667999ae","modified":1739063423468,"created":1739063423468,"name":"API - Notiificação","description":"","environment":{},"environmentPropertyOrder":null,"metaSortKey":-1739063423468,"environmentType":"kv","_type":"request_group"},{"_id":"wrk_2c48f35cf3174573864c6711667999ae","parentId":null,"modified":1739063370297,"created":1739063370297,"name":"api-notificacao.yaml","description":"","scope":"design","_type":"workspace"},{"_id":"req_4bd19fa33d8f4518a76ce25cb693ae49","parentId":"fld_b7ee2f34b1aa4a468c5e8c7abaead73c","modified":1739316383009,"created":1739068057761,"url":"\thttp://localhost:8080/notificacao/ee658413-cca7-4fe1-856f-0bff448c131","name":"Buscar agendamento - Id invalido","description":"","method":"GET","body":{},"parameters":[],"headers":[{"name":"User-Agent","value":"insomnia/10.3.0"}],"authentication":{},"metaSortKey":-1739065614995.5,"isPrivate":false,"pathParameters":[],"settingStoreCookies":true,"settingSendCookies":true,"settingDisableRenderRequestBody":false,"settingEncodeUrl":true,"settingRebuildPath":true,"settingFollowRedirects":"global","_type":"request"},{"_id":"req_f9d7abc5921644f99c308f3c561980c3","parentId":"fld_b7ee2f34b1aa4a468c5e8c7abaead73c","modified":1739319502926,"created":1739319496811,"url":"\thttp://localhost:8080/notificacao/ee658413","name":"Buscar agendamento - Id mal formatado","description":"","method":"GET","body":{},"parameters":[],"headers":[{"name":"User-Agent","value":"insomnia/10.3.0"}],"authentication":{},"metaSortKey":-1739064520955.75,"isPrivate":false,"pathParameters":[],"settingStoreCookies":true,"settingSendCookies":true,"settingDisableRenderRequestBody":false,"settingEncodeUrl":true,"settingRebuildPath":true,"settingFollowRedirects":"global","_type":"request"},{"_id":"req_69149941e2e34c36a8072debd9ddf23a","parentId":"fld_b7ee2f34b1aa4a468c5e8c7abaead73c","modified":1739318312528,"created":1739063426916,"url":"localhost:8080/notificacao","name":"Adicionar agendamento - Valido","description":"","method":"POST","body":{"mimeType":"application/json","text":"{\n  \"dataHora\": \"{{now}}\",\n  \"destinatario\": {\n    \"nome\": \"João Silva\",\n    \"email\": \"joao.silva@email.com\",\n    \"telefone\": \"+55(11)99999-8888\"\n  },\n  \"mensagem\": \"Esta é uma notificação de teste\",\n  \"canal\": \"EMAIL\"\n}"},"parameters":[],"headers":[{"name":"Content-Type","value":"application/json"},{"name":"User-Agent","value":"insomnia/10.3.0"}],"authentication":{"type":"bearer"},"preRequestScript":"const moment = require('moment');\nconst localDateTime = moment().add(1, 'days').format('YYYY-MM-DDTHH:mm:ss.SSS');\n\ninsomnia.environment.set('now', localDateTime);","metaSortKey":-1739063426916,"isPrivate":false,"pathParameters":[],"settingStoreCookies":true,"settingSendCookies":true,"settingDisableRenderRequestBody":false,"settingEncodeUrl":true,"settingRebuildPath":true,"settingFollowRedirects":"global","_type":"request"},{"_id":"req_a8ee988494af4f0b919bbc7614eb5ec6","parentId":"fld_b7ee2f34b1aa4a468c5e8c7abaead73c","modified":1739316812307,"created":1739316532181,"url":"localhost:8080/notificacao","name":"Adicionar agendamento - Invalido","description":"","method":"POST","body":{"mimeType":"application/json","text":"{\n  \"dataHora\": \"{{now}}\",\n  \"destinatario\": {\n\t\t\"email\": \"joao.silva\"\n  }\n\n}"},"parameters":[],"headers":[{"name":"Content-Type","value":"application/json"},{"name":"User-Agent","value":"insomnia/10.3.0"}],"authentication":{"type":"bearer"},"preRequestScript":"const moment = require('moment');\nconst localDateTime = moment().subtract(1, 'days').format('YYYY-MM-DDTHH:mm:ss.SSS');\n\ninsomnia.environment.set('now', localDateTime);","metaSortKey":-1739063426866,"isPrivate":false,"pathParameters":[],"settingStoreCookies":true,"settingSendCookies":true,"settingDisableRenderRequestBody":false,"settingEncodeUrl":true,"settingRebuildPath":true,"settingFollowRedirects":"global","_type":"request"},{"_id":"req_d7a1d1014f2b46ac9592b5100cd4d69b","parentId":"fld_b7ee2f34b1aa4a468c5e8c7abaead73c","modified":1739318640112,"created":1739068181953,"url":"http://localhost:8080/notificacao/ee658413-cca7-4fe1-856f-0bff448c131b","name":"Cancelar agendamento - Id Valido","description":"","method":"DELETE","body":{},"parameters":[],"headers":[{"name":"User-Agent","value":"insomnia/10.3.0"}],"authentication":{},"metaSortKey":-1739063426816,"isPrivate":false,"pathParameters":[],"settingStoreCookies":true,"settingSendCookies":true,"settingDisableRenderRequestBody":false,"settingEncodeUrl":true,"settingRebuildPath":true,"settingFollowRedirects":"global","_type":"request"},{"_id":"req_3f4dd4a787b64642bfa8f227e193ddbc","parentId":"fld_b7ee2f34b1aa4a468c5e8c7abaead73c","modified":1739319461464,"created":1739319453309,"url":"http://localhost:8080/notificacao/ee658413-cca7-4fe1-856f-0bff448c131","name":"Cancelar agendamento - Id Invalido","description":"","method":"DELETE","body":{},"parameters":[],"headers":[{"name":"User-Agent","value":"insomnia/10.3.0"}],"authentication":{},"metaSortKey":-1739063230635.5,"isPrivate":false,"pathParameters":[],"settingStoreCookies":true,"settingSendCookies":true,"settingDisableRenderRequestBody":false,"settingEncodeUrl":true,"settingRebuildPath":true,"settingFollowRedirects":"global","_type":"request"},{"_id":"env_2fd33f54fc9dbf389139771818f32f1c465880c5","parentId":"wrk_2c48f35cf3174573864c6711667999ae","modified":1739318131818,"created":1739063370310,"name":"Base Environment","data":{"now":"2025-02-12T20:55:31.801"},"dataPropertyOrder":{"&":["now"]},"color":null,"isPrivate":false,"metaSortKey":1739063370310,"environmentType":"kv","kvPairData":[{"id":"envPair_22674d6852f54a7ab8e46ded78c9a17b","name":"now","value":"","type":"str","enabled":true}],"_type":"environment"},{"_id":"jar_2fd33f54fc9dbf389139771818f32f1c465880c5","parentId":"wrk_2c48f35cf3174573864c6711667999ae","modified":1739318131814,"created":1739063370313,"name":"Default Jar","cookies":[],"_type":"cookie_jar"},{"_id":"spc_c87800a0a9c04767a1c59ad54551266f","parentId":"wrk_2c48f35cf3174573864c6711667999ae","modified":1739111629916,"created":1739063370301,"fileName":"api-notificacao.yaml","contents":"","contentType":"yaml","_type":"api_spec"},{"_id":"uts_61a93f3930c7411a8ede30ec2d805735","parentId":"wrk_2c48f35cf3174573864c6711667999ae","modified":1739064699029,"created":1739064605275,"name":"Local","metaSortKey":-1739064605275,"_type":"unit_test_suite"},{"_id":"ut_769bece9d4b84a2b8f616c2572c428ce","parentId":"uts_61a93f3930c7411a8ede30ec2d805735","modified":1739318576773,"created":1739064607965,"requestId":"req_69149941e2e34c36a8072debd9ddf23a","name":"Adicionar agendamento - Valido","code":"const response = await insomnia.send();\nconst body =JSON.parse(response.data);\n\nexpect(response.status).to.equal(201);\n\nexpect(body.id).to.not.equal(null);\nexpect(body.dataHora).to.not.equal(null);\nexpect(body.destinatario.nome).to.equal(\"João Silva\");\nexpect(body.destinatario.email).to.equal(\"joao.silva@email.com\");\nexpect(body.destinatario.telefone).to.equal(\"+55(11)99999-8888\");\nexpect(body.mensagem).to.equal(\"Esta é uma notificação de teste\");\nexpect(body.canal).to.equal(\"EMAIL\");\nexpect(body.status).to.equal(\"PENDENTE\");","metaSortKey":-1739127717080,"_type":"unit_test"},{"_id":"ut_088366ca6a0745d68557bb31614ed6f1","parentId":"uts_61a93f3930c7411a8ede30ec2d805735","modified":1739319314607,"created":1739067876429,"requestId":"req_fa5ac046e81b4b6c871dab3d28fa1f0c","name":"Buscar agendamento - Id válido","code":"const response = await insomnia.send();\nconst body =JSON.parse(response.data);\n\nexpect(response.status).to.equal(200);\n\nexpect(body.id).to.not.equal(null);\nexpect(body.dataHora).to.not.equal(null);\nexpect(body.destinatario.nome).to.equal(\"João Silva\");\nexpect(body.destinatario.email).to.equal(\"joao.silva@email.com\");\nexpect(body.destinatario.telefone).to.equal(\"+55(11)99999-8888\");\nexpect(body.mensagem).to.equal(\"Esta é uma notificação de teste\");\nexpect(body.canal).to.equal(\"EMAIL\");\nexpect(body.status).to.equal(\"PENDENTE\");","metaSortKey":-1739127717081,"_type":"unit_test"},{"_id":"ut_8492c09869074e99b6a22f3820b40a1c","parentId":"uts_61a93f3930c7411a8ede30ec2d805735","modified":1739319127553,"created":1739067999065,"requestId":"req_4bd19fa33d8f4518a76ce25cb693ae49","name":"Buscar agendamento - Id invalido","code":"const response = await insomnia.send();\nconst body = response.data;\n\nexpect(response.status).to.equal(404);\n\nexpect(\"Agendamento não encontrado!\").to.equal(body);","metaSortKey":-1739127717080.5,"_type":"unit_test"},{"_id":"ut_f97cf6b6fd454d78a08da64c11b1cd6d","parentId":"uts_61a93f3930c7411a8ede30ec2d805735","modified":1739318569899,"created":1739317044423,"requestId":"req_a8ee988494af4f0b919bbc7614eb5ec6","name":"Adicionar agendamento - Invalido","code":"const response = await insomnia.send();\nconst body = JSON.parse(response.data);\n\nexpect(response.status).to.equal(400);\nexpect(body).to.be.an('array');\n\n\nfunction validarCampo(campoEsperado) {\n    const item = body.find(item => item.field === campoEsperado.field);\n    expect(item.field).to.equal(campoEsperado.field);\n    expect(item.message).to.equal(campoEsperado.message);\n}\n\nvalidarCampo({\n    field: \"destinatario.nome\",\n    message: \"não deve estar em branco\"\n});\n\nvalidarCampo({\n    field: \"destinatario.telefone\",\n    message: \"não deve estar em branco\"\n});\n\nvalidarCampo({\n    field: \"destinatario.email\",\n    message: \"deve ser um endereço de e-mail bem formado\"\n});\n\nvalidarCampo({\n   \"field\": \"mensagem\",\n   \"message\": \"não deve ser nulo\"\n});\n\n\nvalidarCampo({\n    field: \"canal\",\n    message: \"não deve ser nulo\"\n});","metaSortKey":-1739096162522.5,"_type":"unit_test"},{"_id":"ut_319e56d118064e4f9ccc5c2d75b2cea1","parentId":"uts_61a93f3930c7411a8ede30ec2d805735","modified":1739319306393,"created":1739318655003,"requestId":"req_d7a1d1014f2b46ac9592b5100cd4d69b","name":"Cancelar Agendamento - Id Valido","code":"const response = await insomnia.send();\nconst body =JSON.parse(response.data);\n\nexpect(response.status).to.equal(202);\n\nexpect(body.id).to.not.equal(null);\nexpect(body.dataHora).to.not.equal(null);\nexpect(body.destinatario.nome).to.equal(\"João Silva\");\nexpect(body.destinatario.email).to.equal(\"joao.silva@email.com\");\nexpect(body.destinatario.telefone).to.equal(\"+55 11 12345-6789\");\nexpect(body.mensagem).to.equal(\"Esta é uma mensagem de teste\");\nexpect(body.canal).to.equal(\"EMAIL\");\nexpect(body.status).to.equal(\"CANCELADO\");\n","metaSortKey":-1739096162521.5,"_type":"unit_test"},{"_id":"ut_e43d5ade3b3743848f450a83b2884666","parentId":"uts_61a93f3930c7411a8ede30ec2d805735","modified":1739319474640,"created":1739319351678,"requestId":"req_3f4dd4a787b64642bfa8f227e193ddbc","name":"Cancelar Agendamento - Id Invalido","code":"const response = await insomnia.send();\nconst body = response.data;\n\nexpect(response.status).to.equal(404);\n\nexpect(\"Agendamento não encontrado!\").to.equal(body);","metaSortKey":-1739096162520.5,"_type":"unit_test"},{"_id":"ut_26859e39d99e41f2a924a144c80bf102","parentId":"uts_61a93f3930c7411a8ede30ec2d805735","modified":1739319581667,"created":1739319517077,"requestId":"req_f9d7abc5921644f99c308f3c561980c3","name":"Buscar agendamento - id mal formatado","code":"const response = await insomnia.send();\nconst body = response.data;\n\nexpect(response.status).to.equal(400);\n\nexpect(\"O formato de ID inválido.\").to.equal(body);","metaSortKey":-1739319517077,"_type":"unit_test"}]}